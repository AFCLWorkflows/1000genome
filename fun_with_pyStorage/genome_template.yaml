---
name: "genomeFC"
dataIns:
- name: "key_input"
  type: "string"
  source: "key_input"
- name: "key"
  type: "string"
  source: "key"
- name: "k"
  type: "number"
  source: "k"
- name: "x"
  type: "collection"
  source: "x"
- name: "failure_prob"
  type: "number"
  source: "failure_prob"
- name: "output_buckets"
  type: "collection"
  source: "output_buckets"
- name: "AFR"
  type: "string"
  source: "AFR"
- name: "ALL"
  type: "string"
  source: "ALL"
- name: "AMR"
  type: "string"
  source: "AMR"
- name: "EAS"
  type: "string"
  source: "EAS"
- name: "EUR"
  type: "string"
  source: "EUR"
- name: "GBR"
  type: "string"
  source: "GBR"
- name: "SAS"
  type: "string"
  source: "SAS"
- name: "key_columnsfile"
  type: "string"
  source: "key_columnsfile"
- name: "aws_access_key_id"
  type: "string"
  source: "aws_access_key_id"
- name: "aws_secret_key"
  type: "string"
  source: "aws_secret_key"
- name: "aws_session_token"
  type: "string"
  source: "aws_session_token"
- name: "gcp_client_email"
  type: "string"
  source: "gcp_client_email"
- name: "gcp_private_key"
  type: "string"
  source: "gcp_private_key"
- name: "gcp_project_id"
  type: "string"
  source: "gcp_project_id"
workflowBody:
- parallel:
    name: "parallelIndividualSifting"
    dataIns:
    - name: "key_input"
      type: "string"
      source: "genomeFC/key_input"
    - name: "key"
      type: "string"
      source: "genomeFC/key"
    - name: "k"
      type: "number"
      source: "genomeFC/k"
    - name: "x"
      type: "number"
      source: "genomeFC/x"
    - name: "failure_prob"
      type: "number"
      source: "genomeFC/failure_prob"
    - name: "output_buckets"
      type: "collection"
      source: "genomeFC/output_buckets"
    - name: "key_columnsfile"
      type: "string"
      source: "genomeFC/key_columnsfile"
    - name: "AFR"
      type: "string"
      source: "genomeFC/AFR"
    - name: "ALL"
      type: "string"
      source: "genomeFC/ALL"
    - name: "AMR"
      type: "string"
      source: "genomeFC/AMR"
    - name: "EAS"
      type: "string"
      source: "genomeFC/EAS"
    - name: "EUR"
      type: "string"
      source: "genomeFC/EUR"
    - name: "GBR"
      type: "string"
      source: "genomeFC/GBR"
    - name: "SAS"
      type: "string"
      source: "genomeFC/SAS"
    - name: "aws_access_key_id"
      type: "string"
      source: "genomeFC/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "genomeFC/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "genomeFC/aws_session_token"
    - name: "gcp_client_email"
      type: "string"
      source: "genomeFC/gcp_client_email"
    - name: "gcp_private_key"
      type: "string"
      source: "genomeFC/gcp_private_key"
    - name: "gcp_project_id"
      type: "string"
      source: "genomeFC/gcp_project_id"
    parallelBody:
    - section:
      - parallelFor:
          name: "individuals"
          dataIns:
          - name: "k"
            type: "number"
            source: "parallelIndividualSifting/k"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "x"
            type: "number"
            source: "parallelIndividualSifting/x"
            constraints:
            - name: "distribution"
              value: "BLOCK(1)"
          - name: "key_input"
            type: "string"
            source: "parallelIndividualSifting/key_input"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "failure_prob"
            type: "number"
            source: "parallelIndividualSifting/failure_prob"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "output_buckets"
            type: "collection"
            source: "parallelIndividualSifting/output_buckets"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "key_columnsfile"
            type: "string"
            source: "parallelIndividualSifting/key_columnsfile"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_access_key_id"
            type: "string"
            source: "parallelIndividualSifting/aws_access_key_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_secret_key"
            type: "string"
            source: "parallelIndividualSifting/aws_secret_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_session_token"
            type: "string"
            source: "parallelIndividualSifting/aws_session_token"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_client_email"
            type: "string"
            source: "parallelIndividualSifting/gcp_client_email"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_private_key"
            type: "string"
            source: "parallelIndividualSifting/gcp_private_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_project_id"
            type: "string"
            source: "parallelIndividualSifting/gcp_project_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          loopCounter:
            name: "counter"
            type: "number"
            from: "0"
            to: "parallelIndividualSifting/k"
            step: "1"
          loopBody:
          - function:
              name: "genomeIndividual"
              type: "genomeIndividualType"
              dataIns:
              - name: "key_input"
                type: "string"
                source: "individuals/key_input"
              - name: "k"
                type: "number"
                source: "individuals/k"
              - name: "x"
                type: "number"
                source: "individuals/x"
              - name: "failure_prob"
                type: "number"
                source: "individuals/failure_prob"
              - name: "output_buckets"
                type: "collection"
                source: "individuals/output_buckets"
              - name: "key_columnsfile"
                type: "string"
                source: "individuals/key_columnsfile"
              - name: "aws_access_key_id"
                type: "string"
                source: "individuals/aws_access_key_id"
              - name: "aws_secret_key"
                type: "string"
                source: "individuals/aws_secret_key"
              - name: "aws_session_token"
                type: "string"
                source: "individuals/aws_session_token"
              - name: "gcp_client_email"
                type: "string"
                source: "individuals/gcp_client_email"
              - name: "gcp_private_key"
                type: "string"
                source: "individuals/gcp_private_key"
              - name: "gcp_project_id"
                type: "string"
                source: "individuals/gcp_project_id"
              dataOuts:
              - name: "key_result"
                type: "string"
              - name: "failure_prob"
                type: "number"
              - name: "output_buckets"
                type: "collection"
              - name: "key_columnsfile"
                type: "string"
              - name: "aws_access_key_id"
                type: "string"
              - name: "aws_secret_key"
                type: "string"
              - name: "aws_session_token"
                type: "string"
              - name: "gcp_client_email"
                type: "string"
              - name: "gcp_private_key"
                type: "string"
              - name: "gcp_project_id"
                type: "string"
              properties:
              - name: "resource"
                value: "--INSERT URI OF YOUR INDIVIDUAL FUNCTION HERE--"
          dataOuts:
          - name: "key_results"
            type: "collection"
            source: "genomeIndividual/key_result"
          - name: "failure_prob"
            type: "number"
            source: "genomeIndividual/failure_prob"
          - name: "output_buckets"
            type: "collection"
            source: "genomeIndividual/output_buckets"
          - name: "key_columnsfile"
            type: "string"
            source: "genomeIndividual/key_columnsfile"
          - name: "aws_access_key_id"
            type: "string"
            source: "genomeIndividual/aws_access_key_id"
          - name: "aws_secret_key"
            type: "string"
            source: "genomeIndividual/aws_secret_key"
          - name: "aws_session_token"
            type: "string"
            source: "genomeIndividual/aws_session_token"
          - name: "gcp_client_email"
            type: "string"
            source: "genomeIndividual/gcp_client_email"
          - name: "gcp_private_key"
            type: "string"
            source: "genomeIndividual/gcp_private_key"
          - name: "gcp_project_id"
            type: "string"
            source: "genomeIndividual/gcp_project_id"
      - function:
          name: "genomeIndividualsMerge"
          type: "genomeIndividualsMergeType"
          dataIns:
          - name: "key_datafiles"
            type: "collection"
            source: "individuals/key_results"
          - name: "failure_prob"
            type: "number"
            source: "individuals/failure_prob"
          - name: "output_buckets"
            type: "collection"
            source: "individuals/output_buckets"
          - name: "key_columnsfile"
            type: "collection"
            source: "individuals/key_columnsfile"
          - name: "aws_access_key_id"
            type: "string"
            source: "individuals/aws_access_key_id"
          - name: "aws_secret_key"
            type: "string"
            source: "individuals/aws_secret_key"
          - name: "aws_session_token"
            type: "string"
            source: "individuals/aws_session_token"
          - name: "gcp_client_email"
            type: "string"
            source: "individuals/gcp_client_email"
          - name: "gcp_private_key"
            type: "string"
            source: "individuals/gcp_private_key"
          - name: "gcp_project_id"
            type: "string"
            source: "individuals/gcp_project_id"
          properties:
          - name: "resource"
            value: "--INSERT URI OF YOUR INDIVIDUALS MERGE FUNCTION HERE--"
          dataOuts:
          - name: "failure_prob"
            type: "number"
          - name: "output_buckets"
            type: "collection"
          - name: "merged_result"
            type: "string"
          - name: "aws_access_key_id"
            type: "string"
          - name: "aws_secret_key"
            type: "string"
          - name: "aws_session_token"
            type: "string"
          - name: "gcp_client_email"
            type: "string"
          - name: "gcp_private_key"
            type: "string"
          - name: "gcp_project_id"
            type: "string"
    - section:
      - function:
          name: "genomeSifting"
          type: "genomeSiftingType"
          dataIns:
          - name: "key"
            type: "string"
            source: "parallelIndividualSifting/key"
          - name: "failure_prob"
            type: "number"
            source: "parallelIndividualSifting/failure_prob"
          - name: "output_buckets"
            type: "collection"
            source: "parallelIndividualSifting/output_buckets"
          - name: "key_columnsfile"
            type: "string"
            source: "parallelIndividualSifting/key_columnsfile"
          - name: "aws_access_key_id"
            type: "string"
            source: "parallelIndividualSifting/aws_access_key_id"
          - name: "aws_secret_key"
            type: "string"
            source: "parallelIndividualSifting/aws_secret_key"
          - name: "aws_session_token"
            type: "string"
            source: "parallelIndividualSifting/aws_session_token"
          - name: "gcp_client_email"
            type: "string"
            source: "parallelIndividualSifting/gcp_client_email"
          - name: "gcp_private_key"
            type: "string"
            source: "parallelIndividualSifting/gcp_private_key"
          - name: "gcp_project_id"
            type: "string"
            source: "parallelIndividualSifting/gcp_project_id"
          dataOuts:
          - name: "sifted"
            type: "string"
          properties:
          - name: "resource"
            value: "--INSERT URI OF YOUR SIFTING FUNCTION HERE--"
    dataOuts:
    - name: "failure_prob"
      type: "number"
      source: "parallelIndividualSifting/failure_prob"
    - name: "output_buckets"
      type: "collection"
      source: "parallelIndividualSifting/output_buckets"
    - name: "AFR"
      type: "string"
      source: "parallelIndividualSifting/AFR"
    - name: "ALL"
      type: "string"
      source: "parallelIndividualSifting/ALL"
    - name: "AMR"
      type: "string"
      source: "parallelIndividualSifting/AMR"
    - name: "EAS"
      type: "string"
      source: "parallelIndividualSifting/EAS"
    - name: "EUR"
      type: "string"
      source: "parallelIndividualSifting/EUR"
    - name: "GBR"
      type: "string"
      source: "parallelIndividualSifting/GBR"
    - name: "SAS"
      type: "string"
      source: "parallelIndividualSifting/SAS"
    - name: "key_columnsfile"
      type: "string"
      source: "parallelIndividualSifting/key_columnsfile"
    - name: "merged_result"
      type: "string"
      source: "genomeIndividualsMerge/merged_result"
    - name: "sifted"
      type: "string"
      source: "genomeSifting/sifted"
    - name: "aws_access_key_id"
      type: "string"
      source: "parallelIndividualSifting/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "parallelIndividualSifting/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "parallelIndividualSifting/aws_session_token"
    - name: "gcp_client_email"
      type: "string"
      source: "parallelIndividualSifting/gcp_client_email"
    - name: "gcp_private_key"
      type: "string"
      source: "parallelIndividualSifting/gcp_private_key"
    - name: "gcp_project_id"
      type: "string"
      source: "parallelIndividualSifting/gcp_project_id"
- function:
    name: "genomePreparePop"
    type: "genomePreparePopType"
    dataIns:
    - name: "failure_prob"
      type: "number"
      source: "parallelIndividualSifting/failure_prob"
    - name: "output_buckets"
      type: "collection"
      source: "parallelIndividualSifting/output_buckets"
    - name: "AFR"
      type: "string"
      source: "parallelIndividualSifting/AFR"
    - name: "ALL"
      type: "string"
      source: "parallelIndividualSifting/ALL"
    - name: "AMR"
      type: "string"
      source: "parallelIndividualSifting/AMR"
    - name: "EAS"
      type: "string"
      source: "parallelIndividualSifting/EAS"
    - name: "EUR"
      type: "string"
      source: "parallelIndividualSifting/EUR"
    - name: "GBR"
      type: "string"
      source: "parallelIndividualSifting/GBR"
    - name: "SAS"
      type: "string"
      source: "parallelIndividualSifting/SAS"
    - name: "key_columnsfile"
      type: "string"
      source: "parallelIndividualSifting/key_columnsfile"
    - name: "merged_result"
      type: "string"
      source: "parallelIndividualSifting/merged_result"
    - name: "sifted"
      type: "string"
      source: "parallelIndividualSifting/sifted"
    - name: "aws_access_key_id"
      type: "string"
      source: "parallelIndividualSifting/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "parallelIndividualSifting/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "parallelIndividualSifting/aws_session_token"
    - name: "gcp_client_email"
      type: "string"
      source: "parallelIndividualSifting/gcp_client_email"
    - name: "gcp_private_key"
      type: "string"
      source: "parallelIndividualSifting/gcp_private_key"
    - name: "gcp_project_id"
      type: "string"
      source: "parallelIndividualSifting/gcp_project_id"
    dataOuts:
    - name: "POP"
      type: "collection"
    - name: "failure_prob"
      type: "number"
    - name: "output_buckets"
      type: "collection"
    - name: "key_columnsfile"
      type: "string"
    - name: "merged_result"
      type: "string"
    - name: "sifted"
      type: "string"
    - name: "aws_access_key_id"
      type: "string"
    - name: "aws_secret_key"
      type: "string"
    - name: "aws_session_token"
      type: "string"
    - name: "gcp_client_email"
      type: "string"
    - name: "gcp_private_key"
      type: "string"
    - name: "gcp_project_id"
      type: "string"
    properties:
    - name: "resource"
      value: "--INSERT URI OF YOUR PREPARE POP FUNCTION HERE--"
- parallel:
    name: "parallelMutualOverlapFrequency"
    dataIns:
    - name: "POP"
      type: "collection"
      source: "genomePreparePop/POP"
    - name: "failure_prob"
      type: "number"
      source: "genomePreparePop/failure_prob"
    - name: "output_buckets"
      type: "collection"
      source: "genomePreparePop/output_buckets"
    - name: "key_columnsfile"
      type: "string"
      source: "genomePreparePop/key_columnsfile"
    - name: "merged_result"
      type: "string"
      source: "genomePreparePop/merged_result"
    - name: "sifted"
      type: "string"
      source: "genomePreparePop/sifted"
    - name: "aws_access_key_id"
      type: "string"
      source: "genomePreparePop/aws_access_key_id"
    - name: "aws_secret_key"
      type: "string"
      source: "genomePreparePop/aws_secret_key"
    - name: "aws_session_token"
      type: "string"
      source: "genomePreparePop/aws_session_token"
    - name: "gcp_client_email"
      type: "string"
      source: "genomePreparePop/gcp_client_email"
    - name: "gcp_private_key"
      type: "string"
      source: "genomePreparePop/gcp_private_key"
    - name: "gcp_project_id"
      type: "string"
      source: "genomePreparePop/gcp_project_id"
    parallelBody:
    - section:
      - parallelFor:
          name: "mutualOverlaps"
          dataIns:
          - name: "POP"
            type: "collection"
            source: "parallelMutualOverlapFrequency/POP"
            constraints:
            - name: "distribution"
              value: "BLOCK(1)"
          - name: "failure_prob"
            type: "number"
            source: "parallelMutualOverlapFrequency/failure_prob"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "output_buckets"
            type: "collection"
            source: "parallelMutualOverlapFrequency/output_buckets"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "key_columnsfile"
            type: "string"
            source: "parallelMutualOverlapFrequency/key_columnsfile"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "merged_result"
            type: "string"
            source: "parallelMutualOverlapFrequency/merged_result"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "sifted"
            type: "string"
            source: "parallelMutualOverlapFrequency/sifted"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_access_key_id"
            type: "string"
            source: "parallelMutualOverlapFrequency/aws_access_key_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_secret_key"
            type: "string"
            source: "parallelMutualOverlapFrequency/aws_secret_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_session_token"
            type: "string"
            source: "parallelMutualOverlapFrequency/aws_session_token"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_client_email"
            type: "string"
            source: "parallelMutualOverlapFrequency/gcp_client_email"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_private_key"
            type: "string"
            source: "parallelMutualOverlapFrequency/gcp_private_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_project_id"
            type: "string"
            source: "parallelMutualOverlapFrequency/gcp_project_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          loopCounter:
            name: "counter"
            type: "number"
            from: "0"
            to: "7"
            step: "1"
          loopBody:
          - function:
              name: "genomeMutualOverlap"
              type: "genomeMutualOverlapType"
              dataIns:
              - name: "POP"
                type: "collection"
                source: "mutualOverlaps/POP"
              - name: "failure_prob"
                type: "number"
                source: "mutualOverlaps/failure_prob"
              - name: "output_buckets"
                type: "collection"
                source: "mutualOverlaps/output_buckets"
              - name: "key_columnsfile"
                type: "string"
                source: "mutualOverlaps/key_columnsfile"
              - name: "merged_result"
                type: "string"
                source: "mutualOverlaps/merged_result"
              - name: "sifted"
                type: "string"
                source: "mutualOverlaps/sifted"
              - name: "aws_access_key_id"
                type: "string"
                source: "mutualOverlaps/aws_access_key_id"
              - name: "aws_secret_key"
                type: "string"
                source: "mutualOverlaps/aws_secret_key"
              - name: "aws_session_token"
                type: "string"
                source: "mutualOverlaps/aws_session_token"
              - name: "gcp_client_email"
                type: "string"
                source: "mutualOverlaps/gcp_client_email"
              - name: "gcp_private_key"
                type: "string"
                source: "mutualOverlaps/gcp_private_key"
              - name: "gcp_project_id"
                type: "string"
                source: "mutualOverlaps/gcp_project_id"
              properties:
              - name: "resource"
                value: "--INSERT URI OF YOUR MUTUAL OVERLAP FUNCTION HERE--"
    - section:
      - parallelFor:
          name: "frequencies"
          dataIns:
          - name: "POP"
            type: "collection"
            source: "parallelMutualOverlapFrequency/POP"
            constraints:
            - name: "distribution"
              value: "BLOCK(1)"
          - name: "failure_prob"
            type: "number"
            source: "parallelMutualOverlapFrequency/failure_prob"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "output_buckets"
            type: "collection"
            source: "parallelMutualOverlapFrequency/output_buckets"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "key_columnsfile"
            type: "string"
            source: "parallelMutualOverlapFrequency/key_columnsfile"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "merged_result"
            type: "string"
            source: "parallelMutualOverlapFrequency/merged_result"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "sifted"
            type: "string"
            source: "parallelMutualOverlapFrequency/sifted"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_access_key_id"
            type: "string"
            source: "parallelMutualOverlapFrequency/aws_access_key_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_secret_key"
            type: "string"
            source: "parallelMutualOverlapFrequency/aws_secret_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "aws_session_token"
            type: "string"
            source: "parallelMutualOverlapFrequency/aws_session_token"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_client_email"
            type: "string"
            source: "parallelMutualOverlapFrequency/gcp_client_email"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_private_key"
            type: "string"
            source: "parallelMutualOverlapFrequency/gcp_private_key"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          - name: "gcp_project_id"
            type: "string"
            source: "parallelMutualOverlapFrequency/gcp_project_id"
            constraints:
            - name: "distribution"
              value: "REPLICATE(*)"
          loopCounter:
            name: "counter"
            type: "number"
            from: "0"
            to: "7"
            step: "1"
          loopBody:
          - function:
              name: "genomeFrequency"
              type: "genomeFrequencyType"
              dataIns:
              - name: "failure_prob"
                type: "numbers"
                source: "frequencies/failure_prob"
              - name: "POP"
                type: "collection"
                source: "frequencies/POP"
              - name: "output_buckets"
                type: "collection"
                source: "frequencies/output_buckets"
              - name: "key_columnsfile"
                type: "string"
                source: "frequencies/key_columnsfile"
              - name: "merged_result"
                type: "string"
                source: "frequencies/merged_result"
              - name: "sifted"
                type: "string"
                source: "frequencies/sifted"
              - name: "aws_access_key_id"
                type: "string"
                source: "frequencies/aws_access_key_id"
              - name: "aws_secret_key"
                type: "string"
                source: "frequencies/aws_secret_key"
              - name: "aws_session_token"
                type: "string"
                source: "frequencies/aws_session_token"
              - name: "gcp_client_email"
                type: "string"
                source: "frequencies/gcp_client_email"
              - name: "gcp_private_key"
                type: "string"
                source: "frequencies/gcp_private_key"
              - name: "gcp_project_id"
                type: "string"
                source: "frequencies/gcp_project_id"
              properties:
              - name: "resource"
                value: "--INSERT URI OF YOUR FREQUENCIE FUNCTION HERE--"
